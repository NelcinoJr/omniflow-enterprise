<div class="admin-container">
  <aside class="sidebar">
    <div class="logo">OmniFlow <span>Admin</span></div>
    <nav>
      <a class="active">üìä Dashboard</a>
      <a>üîç Auditoria</a>
      <a>‚öôÔ∏è Configura√ß√µes</a>
    </nav>
  </aside>

  <main class="content">
    <header class="top-bar">
      <h1>Dashboard de Monitoramento</h1>
      <div class="status-indicator">
        <span class="dot"></span> Sistema Online - Polling 5s
      </div>
    </header>

    <div class="stats-grid">
      <div class="stat-card">
        <h3>Total de Execu√ß√µes</h3>
        <p class="value">{{ logs.length }}</p>
      </div>
      <div class="stat-card">
        <h3>√öltima Atualiza√ß√£o</h3>
        <p class="time">{{ lastUpdate | date:'HH:mm:ss' }}</p>
      </div>
    </div>

    <section class="log-section">
      <div class="section-header">
        <h2>Auditoria MongoDB (NestJS)</h2>
        <span class="refresh-tag">Sincronizado via NestJS</span>
      </div>

      <div class="table-container">
        @if (isLoading) {
        <div class="loading-state">Conectando ao banco de dados...</div>
        } @else {
        <table>
          <thead>
            <tr>
              <th>ID Job</th>
              <th>Tarefa</th>
              <th>Usu√°rio</th>
              <th>Status</th>
              <th>Data/Hora</th>
            </tr>
          </thead>
          <tbody>
            @for (log of logs; track log._id) {
            <tr>
              <td class="mono-id">{{ log._id.substring(18) }}</td>
              <td><strong>{{ log.task_type }}</strong></td>
              <td>{{ log.user_email }}</td>
              <td>
                <span [class]="'badge ' + getStatusClass(log.status)">
                  {{ log.status }}
                </span>
              </td>
              <td>{{ log.createdAt | date:'dd/MM/yyyy HH:mm:ss' }}</td>
            </tr>
            }
          </tbody>
        </table>
        }
      </div>
    </section>
  </main>
</div>